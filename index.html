
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        text-align: center;
        margin: 0;
        padding: 0;
        background-color: lightgray;
      }
      footer,
      header {
        text-align: center;
        height: 50px;
        background-color: orange;
        color: white;
        line-height: 50px;
      }
      .setttig {
        border: 3px solid orange;
        width: 100;
        height: 30;
        border-radius: 5px;
        margin-bottom: 10px;
      }
      table {
        margin: 0 auto;
      }
      td {
        margin: 3px;
        width: 40px;
        height: 40px;
        border: 1px solid black;
        border-radius: 10%;
        background-color: white;
      }
      .yes {
        background-color: green;
      }
      .not {
        background-color: rgb(161, 126, 149);
      }
      .select {
      }
      #timer {
        font-size: 20px;
        color: red;
      }
      b {
        background-color: white;
      }
    </style>
  </head>
  <body>
    <div id="wrapper">
      <header></header>
      <h1>Игра угадай ячейку</h1>
      <main>
        <p>Угадайте 10 загаданных компьютром ячеек</p>
        <div id="settings">
          <input type="text" id="cell" class="setttig" placeholder="Kлетки" />
          <input type="text" id="clicks" class="setttig" placeholder="Клики" />
          <button class="setttig">START</button>
        </div>
        <table>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
        </table>
        <p id="timer"></p>
      </main>
      <footer>github.com/S4etovod</footer>
    </div>
  </body>
  <script>
    let tds = document.querySelectorAll("td");
    let timer = document.querySelector("#timer");
    let button = document.querySelector("button");
    let incell = document.querySelector("#cell");
    let inclicks = document.querySelector("#clicks");
    let winCounter = 0;
    let obj = {};
    let cell, clicks;

    button.addEventListener("click", function () {
      cell = incell.value;
      clicks = inclicks.value;
      for (let i = 0; i < cell; i++) {
        let rnd = Math.floor(Math.random() * 100);
        if (obj[rnd] == undefined) {
          obj[rnd] = 0;
          tds[rnd].setAttribute("class", "select");
        } else {
          i--;
        }
      }
      let interval = 60;
      let timerId = setInterval(tmr, 1000);
      function tmr() {
        timer.textContent = "Осталось: " + interval + " секунд";
        interval--;
        if (interval < 0) {
          clearInterval(timerId);
          timer.textContent = "YOU LOOSE";
        }
      }

      for (let el of tds) {
        el.addEventListener("click", function (event) {
          event.stopPropagation();
          if (event.target.className == "select") {
            winCounter++;
          }
          if (
            event.target.className == "select" ||
            event.target.className == "select yes"
          ) {
            event.target.setAttribute("class", "select yes");
          } else {
            event.target.setAttribute("class", "not");
          }
          if (winCounter == cell) {
            clearInterval(timerId);
            timer.textContent = "ПОБЕДА!!!!";
          }
          if (
            event.target.className == "select" ||
            event.target.className == "select"
          ) {
            clicks--;
          }
          if (clicks < 0) {
            timer.textContent = "YOU LOOSE";
          }
        });
      }
    });
  </script>
</html>
